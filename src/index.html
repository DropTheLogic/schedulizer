<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Staff Schedule and Task Organizer</title>

	<link href="https://fonts.googleapis.com/css?family=Lustria|Open+Sans"
		rel="stylesheet">
	<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
	<link rel="stylesheet" href="css/main.css" type="text/css" />
</head>

<body>

	<header>
		<h1>Schedulizer</h1>
		<div class="cell">Click things to edit, click away to save</div>
	</header>

	<section id="schedules" class="container" data-bind="foreach: schedules">
		<!-- Schedule Name -->
		<h3 data-bind="visible: !$data.editingName(),
					   text: $data.name,
					   click: $data.editName"></h3>
		<h3><input data-bind="visible: $data.editingName,
							  value: $data.name,
							  hasFocus: $data.editingName" /></h3>

		<!-- Table -->
		<table class="table table-striped table-bordered table-hover
			table-responsive table-condensed">

			<thead>
				<tr class="heading">
					<td class="cell-title">Name</td>
					<td class="cell-title">Job</td>
					<!-- ko {foreach: $data.periodNames} -->
					<td data-bind="text: $data"></td>
					<!-- /ko -->
				</tr>
			</thead>

			<tbody>
				<!-- ko {foreach: workers} -->
				<tr>
					<!-- Worker Name -->
					<td class="cell">
						<div data-bind="visible: !editingName(), text: name,
										click: editName"></div>
						<input data-bind="visible: editingName, value: name,
										  hasFocus: editingName" />
					</td>

					<!-- Worker Job -->
					<td class="cell">
						<div data-bind="visible: !editingJob(), text: job,
										click: editJob"></div>
						<input data-bind="visible: editingJob, value: job,
										  hasFocus: editingJob" />
					</td>

					<!-- ko { foreach: hours} -->
					<td class="cell">
						<!-- In time -->
						<span data-bind="
							visible: !$data.editingInHour(),
							text: $data.in.hour,
							click: function() { $data.editInHour(); }"></span>
						<select data-bind="
							visible: $data.editingInHour,
							options: hours, value: $data.in.hour,
							hasFocus: $data.editingInHour"></select>
						<span>:</span>
						<span data-bind="
							visible: !$data.editingInMin(),
							text: ('0' + $data.in.min()).slice(-2),
							click: function() { $data.editInMin(); }"></span>
						<select data-bind="
							visible: $data.editingInMin,
							options: minutes, value: $data.in.min,
							hasFocus: $data.editingInMin"></select>
						<span data-bind="
							visible: !$data.editingInAM(),
							text: $data.in.am,
							click: function() { $data.editInAM(); }"></span>
						<select data-bind="
							visible: $data.editingInAM,
							options: am, value: $data.in.am,
							hasFocus: $data.editingInAM"></select>

						<span class="spacer"> - </span>

						<!-- Out time -->
						<span data-bind="
							visible: !$data.editingOutHour(),
							text: $data.out.hour,
							click: function() { $data.editOutHour(); }"></span>
						<select data-bind="
							visible: $data.editingOutHour,
							options: hours, value: $data.out.hour,
							hasFocus: $data.editingOutHour"></select>
						<span>:</span>
						<span data-bind="
							visible: !$data.editingOutMin(),
							text: ('0' + $data.out.min()).slice(-2),
							click: function() { $data.editOutMin(); }"></span>
						<select data-bind="
							visible: $data.editingOutMin,
							options: minutes, value: $data.out.min,
							hasFocus: $data.editingOutMin"></select>
						<span data-bind="
							visible: !$data.editingOutAM(),
							text: $data.out.am,
							click: function() { $data.editOutAM(); }"></span>
						<select data-bind="
							visible: $data.editingOutAM,
							options: am, value: $data.out.am,
							hasFocus: $data.editingOutAM"></select>
					</td>
					<!-- /ko -->
				</tr>
				<!-- /ko -->
			</tbody>
		</table>

		<!-- Button to add new worker to schedule -->
		<button data-bind="click: addWorker" class="button-worker cell">
			+ Add Worker
		</button>

	</section>

	<div class="container">
		<!-- Button to add new schedule -->
		<button data-bind="click: $root.addSchedule" class="button-schedule">
			+ Add New Schedule
		</button>
	</div>

	<script src="js/jquery-3.1.1.min.js"></script>
	<script src="js/knockout-3.4.1.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/app.js"></script>
</body>

</html>